
name: Betting Boyz SofaScore Bot

on:
  schedule:
    - cron: "0 7 * * *"   # 09:00 SAST (UTC+2)
    - cron: "0 14 * * *"  # 16:00 SAST (UTC+2)
  workflow_dispatch:
    inputs:
      slot:
        description: "morning or afternoon (blank runs both)"
        required: false
        default: ""
      run_date:
        description: "YYYY-MM-DD (optional)"
        required: false
        default: ""

jobs:
  run-bot:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.12"
      - name: Install deps
        run: |
          python -m pip install --upgrade pip
          pip install requests twilio
      - name: Run bot
        env:
          TWILIO_ACCOUNT_SID: ${{ secrets.TWILIO_ACCOUNT_SID }}
          TWILIO_AUTH_TOKEN: ${{ secrets.TWILIO_AUTH_TOKEN }}
          TWILIO_WHATSAPP_FROM: ${{ secrets.TWILIO_WHATSAPP_FROM }}
          TO_WHATSAPP_NUMBER: ${{ secrets.TO_WHATSAPP_NUMBER }}
          WHATSAPP_CHANNEL_LINK: ${{ secrets.WHATSAPP_CHANNEL_LINK }}
          SLOT: ${{ github.event.inputs.slot }}
          RUN_DATE: ${{ github.event.inputs.run_date }}
        run: |
          python betting_boyz_runner.py
